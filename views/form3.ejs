<html>

<head>
    <title>Create Project Proposal</title>
    <%- include partials/scriptResources %>
    <link rel="stylesheet" href="css/form2.css">
</head>

<body>
    <div class="main ui text container">
        <div class="ui segments" style="padding-left: 1.2em; padding-right: 1.2em;">
            <form name="form2" action="create-form-3-confirm" method="post">
                <br>
                <div class="ui grid">
                    <div class="two column row">
                        <div class="left floated column">
                            <h1 class="ui header" style="margin-top: 0.65em;">Create Proposal Form</h1>
                        </div>
                        <div class="right floated column">
                            <img src="assets/svg/logo_opps-logo-green.svg" />
                        </div>
                    </div>
                </div>
                <input style="display:none;" value='0' id="dynamicTable3length" name="dynamicTable3len">
                <h3 class="labelHead ui header"><label>Breakdown of Expenses <span class="red">*</span></label></h3>
                <table class="ui compact celled definition fixed table unstackable" id="dynamicTable3">
                    <thead class="full-width">
                        <tr style="text-align: center;">
                            <th style="width: 40px;"></th>
                            <th class="item">Materials</th>
                            <th class="item">Quantity</th>
                            <th class="item">Unit Cost</th>
                            <th class="item">Total Cost</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="collapsing">
                                <div class="ui fitted checkbox">
                                    <input type="checkbox"> <label></label>
                                </div>
                            </td>
                            <td><input class="inputron no-margin" type="text" name="material0" required></td>
                            <td><input class="inputron no-margin" type="number" name="quantity0" onkeyup="computeBOE()"
                                    value=0 min=0 required></td>
                            <td><input class="inputron no-margin" type="number" name="unit0" onkeyup="computeBOE()"
                                    value=0.00 min=0 step=0.01 required></td>
                            <td class="bg-gray" name="BOE_subtotal0">Php 0.00</td>
                        </tr>
                    </tbody>
                    <tfoot class="full-width">
                        <tr>
                            <th></th>
                            <th colspan="3" class="total">
                                <div class="ui right floated small primary labeled">
                                    Total:
                                </div>
                            </th>
                            <th class="result" name="boeTotal">Php 0.00</th>
                        </tr>
                    </tfoot>
                </table>
                <button type="button" class="row-button next" id="btnAddBOE">Add Row</button>
                <button type="button" class="row-button previous" id="btnDeleteBOE">Delete Row</button>

                <br /><br />
                <h3 class="labelHead ui header"><label>Source of Funds <span class="red">*</span></label></h3>
                <table class="ui compact celled definition fixed table basic unstackable">
                    <thead class="full-width">
                        <tr style="text-align: center;">
                            <th class="item eleven wide">Source/s of Funds</th>
                            <th class="item three wide">Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Organizational Funds</td>
                            <td>Php <input class="inputron no-margin table_input" name="OrganizationalFunds" type="number"
                                    value="0.00" min="0" step="0.01" required></td>
                        </tr>
                        <tr>
                            <td>Participants Fee</td>
                            <td>Php <input class="inputron no-margin table_input" name="ParticipantsFee" type="number"
                                    value="0.00" min="0" step="0.01" required></td>
                        </tr>
                        <tr>
                            <td>Others (i.e. Sponsorships)</td>
                            <td>Php <input class="inputron no-margin table_input" name="OtherFunds" type="number" value="0.00"
                                    min="0" step="0.01" required></td>
                        </tr>
                    </tbody>
                    <tfoot class="full-width">
                        <tr>
                            <th colspan="1" class="total">
                                <div class="ui right floated small primary labeled">
                                    Total:
                                </div>
                            </th>
                            <th class="result" name="totalSource">Php 0.00</th>
                        </tr>
                    </tfoot>
                </table>

                <br>
                <h3 class="labelHead ui header"><label>Organizational Funds <span class="red">*</span></label></h3>
                <table class="ui compact celled definition fixed table basic unstackable">
                    <thead class="full-width">
                        <tr style="text-align: left;">
                            <!-- <th style="width: 40px;"></th> -->
                            <!-- <th class="item" style="width: 50%">Accumulated Operational Funds</th> -->
                            <th class="item eleven wide" style="border-right: none;">Accumulated Operational Funds</th>
                            <th class="item four wide" style="border-left: none;"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <!-- <td class="collapsing">

                        </td> -->
                            <td>
                                <div class="right">
                                    Operational Fund
                                </div>
                            </td>
                            <td>Php <input class="inputron no-margin table_input" name="OperationalFund" type="number"
                                    value="0.00" min="0" step="0.01" required></td>
                        </tr>

                        <tr>
                            <!-- <td class="collapsing">

                        </td> -->
                            <td colspan="2" style="background: white; padding-top: 0.8em; padding-bottom: 0.8em;">Accumulated
                                Depository Funds</td>

                            <!-- <td></td> -->
                        </tr>
                        <tr>
                            <!-- <td class="collapsing">

                        </td> -->
                            <td>
                                <div class="right">
                                    Depository Fund
                                </div>
                            </td>
                            <td>Php <input class="inputron no-margin table_input" name="DepositoryFund" type="number"
                                    value="0.00" min="0" step="0.01" required></td>
                        </tr>
                        <tr>
                            <!-- <td class="collapsing">

                        </td> -->
                            <td colspan="2" style="background: white; padding-top: 0.8em; padding-bottom: 0.8em;">Other
                                Sources of Funds</td>
                            <!-- <td></td> -->
                        </tr>
                        <tr>
                            <!-- <td class="collapsing">

                        </td> -->
                            <td>
                                <div class="right">
                                    Participants Fee/Donation/Sponsorships
                                </div>
                            </td>
                            <td>Php <input class="inputron no-margin table_input" name="OtherFund" type="number" value="0.00"
                                    min="0" step="0.01" required></td>
                        </tr>
                        <tr>
                            <!-- <td class="collapsing">

                        </td> -->
                            <td class="bg-gray bold">
                                <div class="right italics">
                                    Total Cash For Disbursement
                                </div>
                            </td>
                            <td style="background-color: #F7F7F7;" name="totalDisbursement">Php 0.00</td>
                        </tr>
                        <tr>
                            <!-- <td class="collapsing">

                        </td> -->
                            <td>
                                <div class="right bold">
                                    Less: Total Projected Expenses
                                </div>
                            </td>
                            <td style="background-color: #F7F7F7;">Php 0.00</td>
                        </tr>
                        <tr>
                            <!-- <td class="collapsing">

                        </td> -->
                            <td class="bg-gray">
                                <div class="right bold">
                                    REMAINING BALANCE
                                </div>
                            </td>
                            <td style="background-color: #F7F7F7;">Php 0.00</td>
                        </tr>
                    </tbody>
                </table>

                <br>
                <input style="display:none;" value='0' id="dynamicTable4length" name="dynamicTable4len">
                <h3 class="labelHead ui header"><label>Projected Income <span class="red">*</span></label></h3>
                <table class="ui compact celled definition fixed table unstackable" id="dynamicTable4">
                    <thead class="full-width">
                        <tr>
                            <th style="width:40px"></th>
                            <th colspan="4">Projected Revenue</th>
                            <!-- <th class="pj-border"></th>
                            <th class="pj-border"></th>
                            <th class="pj-border"></th> -->
                        </tr>
                        <tr style="text-align: center;">
                            <th style="width: 40px;"></th>
                            <th class="item">Item</th>
                            <th class="item">Qty</th>
                            <th class="item">Selling Price</th>
                            <th class="item">Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="collapsing">
                                <div class="ui fitted checkbox">
                                    <input type="checkbox"> <label></label>
                                </div>
                            </td>
                            <td><input class="inputron no-margin" type="text" name="item0" required></td>
                            <td><input class="inputron no-margin" type="number" name="qty0" onkeyup="computeRev()"
                                    value="0" min="0"></td>
                            <td><input class="inputron no-margin" name="price0" onkeyup="computeRev()" type="number"
                                    value="0.00" min="0" step="0.01" required></td>
                            <td class="bg-gray" name="amount0">Php 0.00</td>
                        </tr>
                    </tbody>
                </table>
                <button type="button" class="row-button next" id="btnAddProjRev">Add Row</button>
                <button type="button" class="row-button previous" id="btnDeleteProjRev">Delete Row</button>

                <!-- <br><br> -->
                <input style="display:none;" value='0' id="dynamicTable5length" name="dynamicTable5len">
                <table class="ui compact celled definition fixed table unstackable" id="dynamicTable5">
                    <thead class="full-width">
                        <tr>
                            <th style="width:40px"></th>
                            <th colspan="4">Less: Projected Expenses</th>
                        </tr>
                        <tr style="text-align: center;">
                            <th style="width: 40px;"></th>
                            <th class="item">Item</th>
                            <th class="item">Qty</th>
                            <th class="item">Selling Price</th>
                            <th class="item">Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="collapsing">
                                <div class="ui fitted checkbox">
                                    <input type="checkbox"> <label></label>
                                </div>
                            </td>
                            <td><input class="inputron no-margin" type="text" name="it0" required></td>
                            <td><input class="inputron no-margin" type="number" name="qu0" onkeyup="computeExp()"
                                    required value="0" min="0"></td>
                            <td><input class="inputron no-margin" name="pr0" type="number" onkeyup="computeExp()" value="0.00"
                                    min="0" step="0.01" required></td>
                            <td class="bg-gray" name="am0">Php 0.00</td>
                        </tr>
                    </tbody>
                    <tfoot class="full-width">
                        <tr>
                            <th></th>
                            <th colspan="3" class="total">
                                <div class="ui right floated small primary labeled">
                                    <!-- Income = Revenue - Expenses -->
                                    Total Projected Income:
                                </div>
                            </th>
                            <th name="projIncomeTotal">Php 0.00</th>
                        </tr>
                    </tfoot>
                </table>
                <button type="button" class="row-button next" id="btnAddProjExp">Add Row</button>
                <button type="button" class="row-button previous" id="btnDeleteProjExp">Delete Row</button>

                <br /><br />
                <h3 class="labelHead ui header"><label>Provision for Profit and Loss</label></h3>
                The following people shall be held liable and will shoulder any remaining balance incurred
                by the project.<br><br>

                <span>Name of Person Responsible <em>(aside from you)</em><span class="red"> *</span></span>
                <br />
                <input class="inputron" name='namePR' type="text" required>
                <br /><br />
                <span>Position of Person Responsible<span class="red"> *</span></span>
                <br />
                <input class="inputron" name='positionPR' type="text" required>
                <br /><br />

                <div class="ui grid">
                    <div class="row"></div>
                    <div class="row"></div>
                    <div class="row">
                        <div class="four wide left floated column">
                            <button type="submit" class="fluid submit-button previous">Previous</button>
                        </div>
                        <div class="three wide centered column status">
                            <div class="container">
                                <!-- GO TO CORRESPONDING PAGE WHEN CLICKED? -->
                                <a class="pagination"><span class="circle"></span></a>
                                <a class="pagination"><span class="circle"></span></a>
                                <a class="pagination"><span class="circle active"></span></a>
                            </div>
                        </div>
                        <div class="four wide right floated column">
                            <button type="submit" class="fluid submit-button next">Submit</button>
                        </div>
                    </div>
                    <div class="row"></div>
                </div>
            </form>
        </div>
    </div>

    <script>
        //add row in break down of expenses
        function addBOE() {
            var row = document.createElement("tr");
            var col1 = document.createElement("td");
            col1.className = "collapsing";
            var div = document.createElement("div");
            div.className = "ui fitted checkbox";
            var cBox = document.createElement("input");
            cBox.setAttribute('type', 'checkbox');
            var label = document.createElement("label");

            var tableLength = document.getElementById("dynamicTable3length");
            row.setAttribute('value', tableLength.value)
            tableLength.setAttribute('value', parseInt(tableLength.value, 10) + 1)

            div.append(cBox);
            div.append(label);
            col1.append(div);

            var col2 = document.createElement("td");
            var input2 = document.createElement("input");
            input2.className = "inputron no-margin";
            input2.setAttribute('type', 'text');
            input2.setAttribute('required', true);
            input2.setAttribute('name', 'material' + tableLength.value);
            col2.append(input2);

            var col3 = document.createElement("td");
            var input3 = document.createElement("input");
            input3.className = "inputron no-margin";
            input3.setAttribute('type', 'number');
            input3.setAttribute('required', true);
            input3.setAttribute('onkeyup', 'computeBOE()');
            input3.setAttribute('min', 0);
            input3.setAttribute('value', 0);
            input3.setAttribute('name', 'quantity' + tableLength.value);
            col3.append(input3);

            var col4 = document.createElement("td");
            var input4 = document.createElement("input");
            input4.className = "inputron no-margin";
            input4.setAttribute('type', 'number');
            input4.setAttribute('required', true);
            input4.setAttribute('onkeyup', 'computeBOE()');
            input4.setAttribute('name', 'unit' + tableLength.value);
            input4.setAttribute('min', 0);
            input4.setAttribute('value', 0.00);
            input4.setAttribute('step', 0.01)
            col4.append(input4);

            var col5 = document.createElement("td");
            col5.className = "bg-gray";
            col5.setAttribute('name', 'BOE_subtotal' + tableLength.value);
            col5.innerHTML = 'Php 0.00'

            row.append(col1);
            row.append(col2);
            row.append(col3);
            row.append(col4);
            row.append(col5);

            $("#dynamicTable3").find('tbody').append(row);
        }

        function computeBOE() {
            var rowCount = $('#dynamicTable3 tr').length - 2;
            var totalBOE = 0;

            for (var num = 0; num < rowCount; num++) {
                $("input[name=quantity" + num + "]").each(function () {
                    subtotal_BOE = $("input[name=unit" + num + "]").val() * parseFloat($(
                        this).val());
                });
                $("input[name=unit" + num + "]").each(function () {
                    subtotal_BOE = $("input[name=quantity" + num + "]").val() * parseFloat(
                        $(this).val());
                });
                $("td[name=BOE_subtotal" + num + "]").text("Php " + subtotal_BOE.toFixed(2));
                totalBOE += subtotal_BOE;
            }

            $("th[name=boeTotal]").text("Php " + totalBOE.toFixed(2));
        }

        function deleteBOE() {
            let tableRef = document.getElementById('dynamicTable3');
            let tbody = tableRef.querySelector("tbody");

            let checkedInputs = document.querySelectorAll("input[type='checkbox']:checked");
            Array.prototype.slice.call(checkedInputs)
                .forEach(input => tbody.removeChild(input.parentNode.parentNode.parentNode))

            var i;
            //reset index
            for (i = 0; i < document.getElementById("dynamicTable3").rows.length - 1; i++) {
                for (var j = 0; j < document.getElementById("dynamicTable3").rows[i].cells.length; j++) {
                    if (i > 0 && j == 1) {
                        document.getElementById("dynamicTable3").rows[i].cells[j].firstElementChild.name = 'material' +
                            (i - 1);
                    }
                    if (i > 0 && j == 2) {
                        document.getElementById("dynamicTable3").rows[i].cells[j].firstElementChild.name = 'quantity' +
                            (i - 1);
                    }
                    if (i > 0 && j == 3) {
                        document.getElementById("dynamicTable3").rows[i].cells[j].firstElementChild.name = 'unit' + (i -
                            1);
                    }
                    if (i > 0 && j == 4) {
                        document.getElementById("dynamicTable3").rows[i].cells[j].setAttribute('name', 'BOE_subtotal' +
                            (i - 1));
                    }
                }
            }

            var tableLength = document.getElementById("dynamicTable3length");
            tableLength.setAttribute('value', i - 2)
            console.log('DELETE BOE()');

            computeBOE();
        }

        //add row in projected revenue
        function addProjRev() {
            var row = document.createElement("tr");
            var col1 = document.createElement("td");
            col1.className = "collapsing";
            var div = document.createElement("div");
            div.className = "ui fitted checkbox";
            var cBox = document.createElement("input");
            cBox.setAttribute('type', 'checkbox');
            var label = document.createElement("label");

            var tableLength = document.getElementById("dynamicTable4length");
            row.setAttribute('value', tableLength.value)
            tableLength.setAttribute('value', parseInt(tableLength.value, 10) + 1)

            div.append(cBox);
            div.append(label);
            col1.append(div);

            var col2 = document.createElement("td");
            var input2 = document.createElement("input");
            input2.className = "inputron no-margin";
            input2.setAttribute('type', 'text');
            input2.setAttribute('required', true);
            input2.setAttribute('name', 'item' + tableLength.value);
            col2.append(input2);

            var col3 = document.createElement("td");
            var input3 = document.createElement("input");
            input3.className = "inputron no-margin";
            input3.setAttribute('type', 'number');
            input3.setAttribute('required', true);
            input3.setAttribute('name', 'qty' + tableLength.value);
            input3.setAttribute('onkeyup', 'computeRev()');
            input3.setAttribute('min', 0);
            input3.setAttribute('value', 0);
            col3.append(input3);

            var col4 = document.createElement("td");
            var input4 = document.createElement("input");
            input4.className = "inputron no-margin";
            input4.setAttribute('type', 'number');
            input4.setAttribute('required', true);
            input4.setAttribute('name', 'price' + tableLength.value);
            input4.setAttribute('onkeyup', 'computeRev()');
            input4.setAttribute('min', 0);
            input4.setAttribute('value', 0.00);
            input4.setAttribute('step', 0.01)
            col4.append(input4);

            var col5 = document.createElement("td");
            col5.className = "bg-gray";
            col5.setAttribute('name', 'amount' + tableLength.value);
            col5.innerHTML = "Php 0.00";

            row.append(col1);
            row.append(col2);
            row.append(col3);
            row.append(col4);
            row.append(col5);

            $("#dynamicTable4").find('tbody').append(row);

            console.log('ADD ProjRev()');
        }

        //delete row in projected revenue
        function deleteProjRev() {
            let tableRef = document.getElementById('dynamicTable4');
            let tbody = tableRef.querySelector("tbody");

            let checkedInputs = document.querySelectorAll("input[type='checkbox']:checked");
            Array.prototype.slice.call(checkedInputs)
                .forEach(input => tbody.removeChild(input.parentNode.parentNode.parentNode))

            var i;
            //reset index
            for (i = 0; i < document.getElementById("dynamicTable4").rows.length; i++) {
                for (var j = 0; j < document.getElementById("dynamicTable4").rows[i].cells.length; j++) {
                    if (i > 1 && j == 1) {
                        document.getElementById("dynamicTable4").rows[i].cells[j].firstElementChild.name = 'item' + (i -
                            2);
                    }
                    if (i > 1 && j == 2) {
                        document.getElementById("dynamicTable4").rows[i].cells[j].firstElementChild.name = 'qty' + (i -
                            2);
                    }
                    if (i > 1 && j == 3) {
                        document.getElementById("dynamicTable4").rows[i].cells[j].firstElementChild.name = 'price' + (i -
                            2);
                    }
                    if (i > 1 && j == 4) {
                        document.getElementById("dynamicTable4").rows[i].cells[j].setAttribute('name', 'amount' + (i -
                            2));
                    }
                }
            }

            var tableLength = document.getElementById("dynamicTable4length");
            tableLength.setAttribute('value', i - 3)
            console.log('DELETE ProjRev()');

            computeRev();
        }

        function computeRev() {
            var rowCount = $('#dynamicTable4 tr').length - 2;

            for (var num = 0; num < rowCount; num++) {
                $("input[name=qty" + num + "]").each(function () {
                    subtotal = $("input[name=price" + num + "]").val() * parseFloat($(
                        this).val());
                });
                $("input[name=price" + num + "]").each(function () {
                    subtotal = $("input[name=qty" + num + "]").val() * parseFloat(
                        $(this).val());
                });
                $("td[name=amount" + num + "]").text("Php " + subtotal.toFixed(2));
            }

            updateIncome();
        }

        function computeExp() {
            var rowCount = $('#dynamicTable5 tr').length - 3;

            for (var num = 0; num < rowCount; num++) {
                $("input[name=qu" + num + "]").each(function () {
                    subtotal = $("input[name=pr" + num + "]").val() * parseFloat($(
                        this).val());
                });
                $("input[name=pr" + num + "]").each(function () {
                    subtotal = $("input[name=qu" + num + "]").val() * parseFloat(
                        $(this).val());
                });
                $("td[name=am" + num + "]").text("Php " + subtotal.toFixed(2));
            }

            updateIncome();
        }

        function updateIncome() {
            var totalIncome = 0;
            var totalRev = 0;
            var totalExp = 0;
            var num;

            var rowCountRev = $('#dynamicTable4 tr').length - 2;
            for (num = 0; num < rowCountRev; num++) {
                $("input[name=qty" + num + "]").each(function () {
                    subtotal = $("input[name=price" + num + "]").val() * parseFloat($(
                        this).val());
                });
                $("input[name=price" + num + "]").each(function () {
                    subtotal = $("input[name=qty" + num + "]").val() * parseFloat(
                        $(this).val());
                });
                totalRev += subtotal;
            }

            var rowCountExp = $('#dynamicTable5 tr').length - 3;
            for (num = 0; num < rowCountExp; num++) {
                $("input[name=qu" + num + "]").each(function () {
                    subtotal = $("input[name=pr" + num + "]").val() * parseFloat($(
                        this).val());
                });
                $("input[name=pr" + num + "]").each(function () {
                    subtotal = $("input[name=qu" + num + "]").val() * parseFloat(
                        $(this).val());
                });
                totalExp += subtotal;
            }

            totalIncome = totalRev - totalExp;
            $("th[name=projIncomeTotal]").text("Php " + totalIncome.toFixed(2));
        }

        //add row in projected expenses
        function addProjExp() {
            var row = document.createElement("tr");
            var col1 = document.createElement("td");
            col1.className = "collapsing";
            var div = document.createElement("div");
            div.className = "ui fitted checkbox";
            var cBox = document.createElement("input");
            cBox.setAttribute('type', 'checkbox');
            var label = document.createElement("label");

            var tableLength = document.getElementById("dynamicTable5length");
            row.setAttribute('value', tableLength.value)
            tableLength.setAttribute('value', parseInt(tableLength.value, 10) + 1)

            div.append(cBox);
            div.append(label);
            col1.append(div);

            var col2 = document.createElement("td");
            var input2 = document.createElement("input");
            input2.className = "inputron no-margin";
            input2.setAttribute('type', 'text');
            input2.setAttribute('required', true);
            input2.setAttribute('name', 'it' + tableLength.value);
            col2.append(input2);

            var col3 = document.createElement("td");
            var input3 = document.createElement("input");
            input3.className = "inputron no-margin";
            input3.setAttribute('type', 'number');
            input3.setAttribute('required', true);
            input3.setAttribute('name', 'qu' + tableLength.value);
            input3.setAttribute('onkeyup', 'computeExp()');
            input3.setAttribute('min', 0);
            input3.setAttribute('value', 0);
            col3.append(input3);

            var col4 = document.createElement("td");
            var input4 = document.createElement("input");
            input4.className = "inputron no-margin";
            input4.setAttribute('type', 'number');
            input4.setAttribute('required', true);
            input4.setAttribute('name', 'pr' + tableLength.value);
            input4.setAttribute('onkeyup', 'computeExp()');
            input4.setAttribute('min', 0);
            input4.setAttribute('value', 0.00);
            input4.setAttribute('step', 0.01)
            col4.append(input4);

            var col5 = document.createElement("td");
            col5.setAttribute('name', 'am' + tableLength.value);
            col5.className = "bg-gray";
            col5.innerHTML = "Php 0.00";

            row.append(col1);
            row.append(col2);
            row.append(col3);
            row.append(col4);
            row.append(col5);

            $("#dynamicTable5").find('tbody').append(row);

            console.log('ADD ProjExp()');
        }

        //delete row in projected expenses
        function deleteProjExp() {
            let tableRef = document.getElementById('dynamicTable5');
            let tbody = tableRef.querySelector("tbody");

            let checkedInputs = document.querySelectorAll("input[type='checkbox']:checked");
            Array.prototype.slice.call(checkedInputs)
                .forEach(input => tbody.removeChild(input.parentNode.parentNode.parentNode))

            var i;
            //reset index
            for (i = 0; i < document.getElementById("dynamicTable5").rows.length - 1; i++) {
                for (var j = 0; j < document.getElementById("dynamicTable5").rows[i].cells.length; j++) {
                    if (i > 1 && j == 1) {
                        document.getElementById("dynamicTable5").rows[i].cells[j].firstElementChild.name = 'it' + (i -
                            2);
                    }
                    if (i > 1 && j == 2) {
                        document.getElementById("dynamicTable5").rows[i].cells[j].firstElementChild.name = 'qu' + (i -
                            2);
                    }
                    if (i > 1 && j == 3) {
                        document.getElementById("dynamicTable5").rows[i].cells[j].firstElementChild.name = 'pr' + (i -
                            2);
                    }
                    if (i > 1 && j == 4) {
                        document.getElementById("dynamicTable5").rows[i].cells[j].setAttribute('name', 'am' + (i - 2));
                    }
                }
            }

            var tableLength = document.getElementById("dynamicTable5length");
            tableLength.setAttribute('value', i - 3)
            console.log('DELETE ProjExp()');

            computeExp();
        }

        $(document).ready(function () {
            $(document).on('click', 'input[type=checkbox]', function () {
                $(this).closest("tr").find('td').toggleClass("highlight", this.checked);
            });

            document.getElementById("btnAddBOE").addEventListener("click", function () {
                addBOE();
            });

            document.getElementById("btnDeleteBOE").addEventListener("click", function () {
                deleteBOE();
            });

            document.getElementById("btnAddProjRev").addEventListener("click", function () {
                addProjRev();
            });

            document.getElementById("btnDeleteProjRev").addEventListener("click", function () {
                deleteProjRev();
            });

            document.getElementById("btnAddProjExp").addEventListener("click", function () {
                addProjExp();
            });

            document.getElementById("btnDeleteProjExp").addEventListener("click", function () {
                deleteProjExp();
            });

            //adds Source of Funds automatically and Organizational Funds
            var i = 0;
            $("input").change(function () {
                var sum_SOF = 0;
                var sum_OF = 0;
                var remBalance = 0;

                //Source of Funds
                $("input[name=OrganizationalFunds]").each(function () {
                    sum_SOF = sum_SOF + parseFloat($(this).val());
                });
                $("input[name=ParticipantsFee]").each(function () {
                    sum_SOF = sum_SOF + parseFloat($(this).val());
                });
                $("input[name=OtherFunds]").each(function () {
                    sum_SOF = sum_SOF + parseFloat($(this).val());
                });
                $("th[name=totalSource]").text("Php " + sum_SOF.toFixed(2));

                //Organizational Funds
                $("input[name=OperationalFund]").each(function () {
                    sum_OF = sum_OF + parseFloat($(this).val());
                });
                $("input[name=DepositoryFund]").each(function () {
                    sum_OF = sum_OF + parseFloat($(this).val());
                });
                $("input[name=OtherFund]").each(function () {
                    sum_OF = sum_OF + parseFloat($(this).val());
                });
                $("td[name=totalDisbursement]").text("Php " + sum_OF.toFixed(2));
            });

            function calculateSum() {
                var sum = 0;
                $(".txt").each(function () {

                    if (!isNaN(this.value) && this.value.length != 0) {
                        sum += parseFloat(this.value);
                    }

                });
                //.toFixed() method will roundoff the final sum to 2 decimal places
                $("#sum").html(sum.toFixed(2));
            }

            $("#dynamicTable3").on("keyup", ".txt", function () {
                calculateSum();
            });

            //            $('input[name=phead_check][type=checkbox]').click(function(){
            //                if (this.checked) {
            //                    $('#btnDeletePhead').css('color', '#26BE9B');
            //                    $('#btnDeletePhead').css('border-color', '#26BE9B');
            //                }
            //                else {
            //                    $('#btnDeletePhead').css('color', '#DCDCDC');
            //                    $('#btnDeletePhead').css('border-color', '#DCDCDC');
            //                }
            //            });
        });
    </script>
</body>

</html>